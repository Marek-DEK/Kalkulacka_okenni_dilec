<!DOCTYPE html>
<html lang="cs">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TOPDEK - Výpočetní výstup | ATELIER DEK</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <!-- Přidej těsně za <body> globální overlay pro úvodní loading -->
    <div id="global-loader-overlay">
        <div class="dek-loader">
            <span>D</span><span>E</span><span>K</span>
        </div>
    </div>
    <main style="display: flex; gap: 2rem;">
        <nav id="steps-menu" class="steps-menu">
            <ul>
                <li id="step-akce" class="step active"><span>1</span> Název akce</li>
                <li id="step-mail" class="step"><span>2</span> Firemní mail</li>
                <li id="step-vyrobce" class="step"><span>3</span> Výrobce</li>
                <li id="step-produkt" class="step"><span>4</span> Produkt</li>
                <li id="step-velikost" class="step"><span>5</span> Velikost</li>
                <li id="step-pocet" class="step"><span>6</span> Počet oken</li>
                <li id="step-kompletace" class="step"><span>7</span> Typ kompletace</li>
                <li id="step-sklon" class="step"><span>8</span> Sklon střechy</li>
                <li id="step-tloustka" class="step"><span>9</span> Tloušťka izolace</li>
                <li id="step-dhv" class="step"><span>10</span> Typ DHV</li>
                <li id="step-lata" class="step"><span>11</span> Výška latí/bednění</li>
            </ul>
        </nav>
        <div class="form-container">
            <h1 class="form-title">Kalkulačka okenního dílce TOPDEK</h1>
            <!-- KROK 1: Název akce -->
            <div class="form-group">
                <span class="step-label">1</span>
                <label>Název akce <span style="color:#e10000">*</span></label>
                <div style="padding: 0.5em 0 0.2em 0; color: #444;">Zadejte zde název nebo popis akce.</div>
                <input type="text" id="akce" class="form-input" placeholder="Název akce">
                <div id="akce-error" class="error-message" style="display:none;">Toto pole je povinné.</div>
            </div>
            <!-- KROK 2: Firemní mail -->
            <div class="form-group">
                <span class="step-label">2</span>
                <label>Firemní mail <span style="color:#e10000">*</span></label>
                <input type="email" id="email" class="form-input" placeholder="vas@dek-cz.com" required>
                <div id="email-error" class="error-message">Zadejte prosím platný firemní e-mail ve tvaru jmeno@dek-cz.com</div>
            </div>
            <!-- KROK 3: Výrobce -->
            <div class="form-group">
                <span class="step-label">3</span>
                <label>Výrobce:</label>
                <div id="vyrobce-container" class="tile-container">
                    <div id="vyrobce-loading" class="loading-spinner">Načítám výrobce…</div>
                </div>
            </div>
            <!-- KROK 4: Produkt -->
            <div class="form-group" id="produkt-group" style="display:none;">
                <span class="step-label">4</span>
                <label>Produkt:</label>
                <div id="produkt-container" class="tile-container"></div>
            </div>
            <!-- KROK 5: Velikost -->
            <div class="form-group" id="velikost-group" style="display:none;">
                <span class="step-label">5</span>
                <label>Označení velikosti:</label>
                <div id="velikost-table-container"></div>
            </div>
            <!-- Rozměry vybrané velikosti -->
            <div id="rozmery-info" style="display:none;">
                <h3>Rozměry vybrané velikosti:</h3>
                <div>Vnější šířka: <span id="vnejsi-s"></span> mm</div>
                <div>Vnější délka: <span id="vnejsi-d"></span> mm</div>
                <div>Vnitřní šířka ostění: <span id="vnitrni-s"></span> mm</div>
                <div>Vnitřní délka ostění: <span id="vnitrni-d"></span> mm</div>
            </div>
            <!-- KROK 6: Počet oken -->
            <div class="form-group" id="pocet-group" style="display:none;">
                <span class="step-label">6</span>
                <label>Počet oken tohoto typu:</label>
                <div class="number-stepper">
                    <button type="button" id="minus-btn" class="stepper-btn">−</button>
                    <input type="number" id="pocet-oken" class="form-input stepper-input" min="1" value="" placeholder="Zadejte počet oken">
                    <button type="button" id="plus-btn" class="stepper-btn">+</button>
                </div>
            </div>
            <!-- KROK 7: Typ kompletace -->
            <div class="form-group" id="kompletace-group" style="display:none;">
                <span class="step-label">7</span>
                <label>Typ kompletace dílce:</label>
                <div class="tile-container">
                    <div class="tile" id="kompletace-smontovany">
                        Smontovaný dílec, včetně EPS šablony
                        <div style="font-size:0.95em;color:#888;margin-top:0.2em;"><b>Dodání bude pomalejší.</b></div>
                    </div>
                    <div class="tile" id="kompletace-nesmontovany">
                        Nesmontovaný dílec, bez EPS šablony
                        <div style="font-size:0.95em;color:#888;margin-top:0.2em;"><b>Dodání bude rychlejší.</b></div>
                    </div>
                </div>
            </div>
            <!-- KROK 8: Sklon střechy -->
            <div class="form-group" id="sklon-group" style="display:none;">
                <span class="step-label">8</span>
                <label for="sklon-strechy">Sklon střechy (22–65°):</label>
                <div class="sklon-slider-wrap">
                    <div class="sklon-ikonka">
                        <svg id="sklon-cara" width="40" height="40" viewBox="0 0 40 40">
                            <circle cx="5" cy="35" r="2.5" fill="#e10000"/>
                            <rect x="5" y="33.5" width="30" height="3" rx="1.5" fill="#e10000" id="sklon-cara-rect" />
                        </svg>
                    </div>
                    <div style="position:relative;display:flex;align-items:center;">
                        <input type="number" id="sklon-strechy" min="22" max="65" step="1" value="" class="form-input sklon-input" style="width:110px;font-size:1.5em;padding-right:2.2em;" placeholder="–">
                        <span style="position:absolute;right:12px;top:50%;transform:translateY(-50%);font-size:1.4em;color:#888;">°</span>
                    </div>
                    <span id="sklon-error" class="error-message" style="margin-left:1em;"></span>
                </div>
                <div id="sklon-typ" style="font-size:1.15em;font-weight:bold;margin-top:0.4em;"></div>
                <div id="sklon-pozn" style="color:#888;font-size:0.97em;margin-top:0.2em;display:none;">U atypického sklonu může dojít ke zvýšení ceny dílce.</div>
            </div>
            <!-- KROK 9: Tloušťka izolace -->
            <div class="form-group" id="tloustka-group" style="display:none;">
                <span class="step-label">9</span>
                <label for="tloustka-izolace">Tloušťka tepelněizolační vrstvy (80–300 mm):</label>
                <input type="number" id="tloustka-izolace" class="form-input" min="80" max="300" step="1" value="" placeholder="80–300">
                <div id="tloustka-value" style="color:#444;font-size:1em;margin-top:0.3em;">Aktuální hodnota: <span id="tloustka-mm"></span> mm</div>
                <div id="tloustka-error" class="error-message" style="display:none;">Zadejte celé číslo v rozmezí 80 až 300 mm.</div>
            </div>
            <!-- KROK 10: Typ DHV -->
            <div class="form-group" id="dhv-group" style="display:none;">
                <span class="step-label">10</span>
                <label>Typ DHV (difuzně otevřená hydroizolační vrstva):</label>
                <div class="tile-container" id="dhv-tiles">
                    <div class="tile" data-type="DEKTEN MULTI-PRO" data-tloustka="1">DEKTEN MULTI-PRO</div>
                    <div class="tile" data-type="DEKTEN PRO II" data-tloustka="1">DEKTEN PRO II</div>
                    <div class="tile" data-type="TOPDEK SKY" data-tloustka="1">TOPDEK SKY</div>
                    <div class="tile" data-type="DEKTEN COVER PRO" data-tloustka="2">DEKTEN COVER PRO</div>
                </div>
                <div id="dhv-error" class="error-message" style="display:none;">Vyberte typ DHV.</div>
            </div>
            <!-- KROK 11: Výška latí/bednění -->
            <div class="form-group" id="lata-group" style="display:none;">
                <span class="step-label">11</span>
                <label for="kontralata-vyska">Výška kontralatě (40–100 mm):</label>
                <div class="tile-container" id="kontralata-tiles">
                    <div class="tile" data-value="40">40 mm</div>
                    <div class="tile" data-value="50">50 mm</div>
                    <div class="tile" data-value="60">60 mm</div>
                    <div class="tile" data-value="70">70 mm</div>
                    <div class="tile" data-value="80">80 mm</div>
                    <div class="tile" data-value="90">90 mm</div>
                    <div class="tile" data-value="100">100 mm</div>
                </div>
                <div id="kontralata-error" class="error-message" style="display:none;">Vyberte výšku kontralatě v rozmezí 40 až 100 mm.</div>
                <label for="lata-vyska" style="margin-top:1em;">Výška profilu střešních latí nebo tloušťka bednění (20–200 mm):</label>
                <input type="number" id="lata-vyska" class="form-input" min="20" max="100" step="1" value="" placeholder="Zadejte výšku v mm">
                <div id="lata-value" style="color:#444;font-size:1em;margin-top:0.3em;">Aktuální hodnota: <span id="lata-mm"></span> mm</div>
                <div id="lata-error" class="error-message" style="display:none;">Zadejte celé číslo v rozmezí 20 až 100 mm.</div>
                <div style="color:#888;font-size:0.97em;margin-top:0.2em;">Poznámka: Latě mohou být minimálně vysoké 40 mm, bednění minimálně 20 mm.</div>
            </div>
            <button type="button" class="submit-btn" id="submit-btn" style="display:none;">Odeslat dotaz</button>
            <div id="success-message" class="success-message">✓ Úspěšně odesláno!</div>
            <div id="loading-message" class="dek-loader" style="display:none;">
                <span>D</span><span>E</span><span>K</span>
            </div>
        </div>
    </main>
    <footer>
        V případě technických potíží nebo dotazů se prosím obraťte na autora aplikace: 
        <a href="mailto:marek.havlata@dek-cz.com">marek.havlata@dek-cz.com</a>
    </footer>
    <div id="modal-overlay">
        <div id="modal-window">
            <button id="modal-close">&times;</button>
            <div id="modal-content"></div>
        </div>
    </div>
    <script src="js/main.js"></script>
</body>
</html>
